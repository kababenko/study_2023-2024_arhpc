---
## Front matter
title: "Лабораторная работа №6"
subtitle: "Архитектура компьютера и операционные системы"
author: "Бабенко Константин Алексеевич"

## Generic otions
lang: ru-RU
toc-title: "Содержание"

## Bibliography
bibliography: bib/cite.bib
csl: pandoc/csl/gost-r-7-0-5-2008-numeric.csl

## Pdf output format
toc: true # Table of contents
toc-depth: 2
lof: true # List of figures
lot: true # List of tables
fontsize: 12pt
linestretch: 1.5
papersize: a4
documentclass: scrreprt
## I18n polyglossia
polyglossia-lang:
  name: russian
  options:
	- spelling=modern
	- babelshorthands=true
polyglossia-otherlangs:
  name: english
## I18n babel
babel-lang: russian
babel-otherlangs: english
## Fonts
mainfont: PT Serif
romanfont: PT Serif
sansfont: PT Sans
monofont: PT Mono
mainfontoptions: Ligatures=TeX
romanfontoptions: Ligatures=TeX
sansfontoptions: Ligatures=TeX,Scale=MatchLowercase
monofontoptions: Scale=MatchLowercase,Scale=0.9
## Biblatex
biblatex: true
biblio-style: "gost-numeric"
biblatexoptions:
  - parentracker=true
  - backend=biber
  - hyperref=auto
  - language=auto
  - autolang=other*
  - citestyle=gost-numeric
## Pandoc-crossref LaTeX customization
figureTitle: "Рис."
tableTitle: "Таблица"
listingTitle: "Листинг"
lofTitle: "Список иллюстраций"
lotTitle: "Список таблиц"
lolTitle: "Листинги"
## Misc options
indent: true
header-includes:
  - \usepackage{indentfirst}
  - \usepackage{float} # keep figures where there are in the text
  - \floatplacement{figure}{H} # keep figures where there are in the text
---

# Цель работы

Освоение арифметических инструкций языка ассемблера NASM.

# Задание

Нужно написать несколько программ на языке ассемблера NASM, с использование арифмитических 
инструкций.

# Теоретическое введение

Большинство инструкций на языке ассемблера требуют обработки операндов. Адрес операнда предоставляет 
место, где хранятся данные, подлежащие обработке. Это могут быть данные хранящиеся в регистре или в 
ячейке памяти. Далее рассмотрены все существующие способы задания адреса хранения операндов – способы 
адресации.
Существует три основных способа адресации:
• Регистровая адресация – операнды хранятся в регистрах и в команде используются
имена этих регистров, например: mov ax,bx.
• Непосредственная адресация – значение операнда задается непосредственно в команде, Например: mov ax,2.
• Адресация памяти – операнд задает адрес в памяти. В команде указывается символическое обозначение 
ячейки памяти, над содержимым которой требуется выполнить операцию.

Схема команды целочисленного сложения add (от англ. addition - добавление) выполняет
сложение двух операндов и записывает результат по адресу первого операнда. Команда add
работает как с числами со знаком, так и без знака и выглядит следующим образом:
add <операнд_1>, <операнд_2>

Команда целочисленного вычитания sub (от англ. subtraction – вычитание) работает аналогично команде add 
и выглядит следующим образом:
sub <операнд_1>, <операнд_2>

Довольно часто при написании программ встречается операция прибавления или вычитания единицы. Прибавление 
единицы называется инкрементом, а вычитание — декрементом. Для этих операций существуют специальные 
команды: inc (от англ. increment) и dec (от англ. decrement), которые увеличивают и уменьшают на 1 свой 
операнд. Эти команды содержат один операнд и имеет следующий вид:
inc <операнд>
dec <операнд>

Еще одна команда, которую можно отнести к арифметическим командам это команда изменения знака neg:
neg <операнд>

Умножение и деление, в отличии от сложения и вычитания, для знаковых и беззнаковых чисел производиться 
по-разному, поэтому существуют различные команды.
Для беззнакового умножения используется команда mul (от англ. multiply – умножение):
mul <операнд>
Для знакового умножения используется команда imul:
imul <операнд>

Для деления, как и для умножения, существует 2 команды div (от англ. divide - деление) и idiv:
div <делитель> ; Беззнаковое деление
idiv <делитель> ; Знаковое деление

Ввод информации с клавиатуры и вывод её на экран осуществляется в символьном виде.
Кодирование этой информации производится согласно кодовой таблице символов ASCII.
ASCII – сокращение от American Standard Code for Information Interchange (Американский
стандартный код для обмена информацией). Согласно стандарту ASCII каждый символ
кодируется одним байтом.
Расширенная таблица ASCII состоит из двух частей. Первая (символы с кодами 0-127)
является универсальной (см. Приложение.), а вторая (коды 128-255) предназначена для
специальных символов и букв национальных алфавитов и на компьютерах разных типов
может меняться.

Для выполнения лабораторных работ в файле in_out.asm реализованы подпрограммы
для преобразования ASCII символов в числа и обратно. Это:
• iprint – вывод на экран чисел в формате ASCII, перед вызовом iprint в регистр eax
необходимо записать выводимое число (mov eax,<int>).
• iprintLF – работает аналогично iprint, но при выводе на экран после числа добавляет
к символ перевода строки.
• atoi – функция преобразует ascii-код символа в целое число и записает результат
в регистр eax, перед вызовом atoi в регистр eax необходимо записать число (mov
eax,<int>).

# Выполнение лабораторной работы

# Символьные и численные данные в NASM

1) Создаю каталог для программ лабораторной работы № 6, перехожу в него и создаю файл lab6-1.asm:
![Создаю файл](1.jpg){#fig:001 width=70%}

2) Ввожу в файл lab6-1.asm текст программы из листинга 6.1:
![Ввожу текст программы](2.jpg){#fig:002 width=70%}
Создаю исполняемый файл и запускаю его:
![Работа файла](3.jpg){#fig:003 width=70%}

3) Далее изменяю текст программы и вместо символов, записываю в регистры числа. Исправляю текст 
программы следующим образом: заменить строки mov eax,'6' mov ebx,'4' на строки mov eax,6 mov ebx,4:
![Измененный текст](4.jpg){#fig:004 width=70%}
Создаю исполняемый файл и запустите его:
![Работа измененного файла](5.jpg){#fig:005 width=70%}
Код 10 соответствует символу BS, он не отображается.

4) Создаю файл lab6-2.asm в каталоге ~/work/arch-pc/lab06 и ввожу в него текст программы из 
листинга 6.2:
![Введенный текст](6.jpg){#fig:006 width=70%}
Создаю исполняемый файл и запускаю его:
![Работа второго файла](7.jpg){#fig:007 width=70%}
В результате работы программы получено число 106. В данном случае, как и в первом, команда add 
складывает коды символов ‘6’ и ‘4’ (54+52=106). Однако, в отличии от программы lab6-1, функция 
iprintLF позволяет вывести число, а не символ, кодом которого является это число.

5) Аналогично предыдущему примеру изменяю символы на числа:
![Изменения](8.jpg){#fig:008 width=70%}
Создаю исполняемый файл и запускаю его:
![Работа измененной программы](9.jpg){#fig:009 width=70%}
Заменяю функцию iprintLF на iprint. Создаю исполняемый файл и запускаю его:
![Работа программы без LF](10.jpg){#fig:010 width=70%}
Функция iprintLF в отличие от iprint переводит курсор на другую строку.

# Выполнение арифметических операций в NASM
6) Создаю файл lab6-3.asm в каталоге ~/work/arch-pc/lab06:
![Программа](11.jpg){#fig:011 width=70%}
Ввожу текст программы из листинга 6.3:
![Введенный текст](12.jpg){#fig:012 width=70%}
Создаю исполняемый файл и запускаю его:
![Работа программы](13.jpg){#fig:013 width=70%}

7) Создаю файл variant.asm в каталоге ~/work/arch-pc/lab06:
![Создаю новый файл](14.jpg){#fig:014 width=70%}
Ввожу в файл variant.asm текст программы из листинга 6.4:
![Текст программы](15.jpg){#fig:015 width=70%}
1. Строки, отвечающие за вывод на экран сообщения «Ваш вариант:»:
mov eax,rem 
call sprint 
mov eax,edx 
call iprintLF
2. Следующие инструкции отвечают за считывание данных:
mov ecx, x 
mov edx, 80 
call sread
3. Инструкция “call atoi” используется для превращения ASCII кода в число.
4. За вычисления варианта отвечают:
xor edx,edx 
mov ebx,20 
div ebx 
inc edx
5. В edx.
6. Инструкция “inc edx” используется для прибавления единицы.
7. За вывод на экран результата вычислений отвечают:
mov eax,edx 
call iprintLF

# Домашняя работа

Ввожу программу вычисления выражения 𝑦 = (10 + 2𝑥)/3:
![Изменяю первый файл](16.jpg){#fig:016 width=70%}
Создаю исполняемый файл и проверяю его работу для значений 1 и 10:
![Работа файла для 1](17.jpg){#fig:017 width=70%}

# Выводы

Я освоил арифметические инструкции языка ассемблера NASM.

# Список литературы{.unnumbered}

::: {#refs}
:::
