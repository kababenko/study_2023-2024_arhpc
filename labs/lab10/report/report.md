---
## Front matter
title: "Лабораторная работа №10"
subtitle: "Архитектура компьютера и операционные системы"
author: "Бабенко Константин"

## Generic otions
lang: ru-RU
toc-title: "Содержание"

## Bibliography
bibliography: bib/cite.bib
csl: pandoc/csl/gost-r-7-0-5-2008-numeric.csl

## Pdf output format
toc: true # Table of contents
toc-depth: 2
lof: true # List of figures
lot: true # List of tables
fontsize: 12pt
linestretch: 1.5
papersize: a4
documentclass: scrreprt
## I18n polyglossia
polyglossia-lang:
  name: russian
  options:
	- spelling=modern
	- babelshorthands=true
polyglossia-otherlangs:
  name: english
## I18n babel
babel-lang: russian
babel-otherlangs: english
## Fonts
mainfont: PT Serif
romanfont: PT Serif
sansfont: PT Sans
monofont: PT Mono
mainfontoptions: Ligatures=TeX
romanfontoptions: Ligatures=TeX
sansfontoptions: Ligatures=TeX,Scale=MatchLowercase
monofontoptions: Scale=MatchLowercase,Scale=0.9
## Biblatex
biblatex: true
biblio-style: "gost-numeric"
biblatexoptions:
  - parentracker=true
  - backend=biber
  - hyperref=auto
  - language=auto
  - autolang=other*
  - citestyle=gost-numeric
## Pandoc-crossref LaTeX customization
figureTitle: "Рис."
tableTitle: "Таблица"
listingTitle: "Листинг"
lofTitle: "Список иллюстраций"
lotTitle: "Список таблиц"
lolTitle: "Листинги"
## Misc options
indent: true
header-includes:
  - \usepackage{indentfirst}
  - \usepackage{float} # keep figures where there are in the text
  - \floatplacement{figure}{H} # keep figures where there are in the text
---

# Цель работы

Приобретение навыков написания программ для работы с файлами.

# Задание

Написать несколько программ работающих с файлами, поработать с правами доступа с файлами.

# Теоретическое введение

Права доступа определяют набор действий (чтение, запись, выполнение), разрешённых
для выполнения пользователям системы над файлами. Для каждого файла пользователь
может входить в одну из трех групп: владелец, член группы владельца, все остальные. Для
каждой из этих групп может быть установлен свой набор прав доступа. Владельцем файла
является его создатель. Для предоставления прав доступа другому пользователю или другой
группе командой
chown [ключи] <новый_пользователь>[:новая_группа] <файл>
или
chgrp [ключи] < новая_группа > <файл>

Для создания и открытия файла служит системный вызов sys_creat, который использует
следующие аргументы: права доступа к файлу в регистре ECX, имя файла в EBX и номер
системного вызова sys_creat (8) в EAX.

Для записи в файл служит системный вызов sys_write, который использует следующие
аргументы: количество байтов для записи в регистре EDX, строку содержимого для записи
ECX, файловый дескриптор в EBX и номер системного вызова sys_write (4) в EAX.
Системный вызов возвращает фактическое количество записанных байтов в регистр EAX.
В случае ошибки, код ошибки также будет находиться в регистре EAX.
Прежде чем записывать в файл, его необходимо создать или открыть, что позволит получить 
дескриптор файла.

Для чтения данных из файла служит системный вызов sys_read, который использует
следующие аргументы: количество байтов для чтения в регистре EDX, адрес в памяти для
записи прочитанных данных в ECX, файловый дескриптор в EBX и номер системного вызова
sys_read (3) в EAX. Как и для записи, прежде чем читать из файла, его необходимо открыть,
что позволит получить дескриптор файла.

Для правильного закрытия файла служит системный вызов sys_close, который использует
один аргумент – дескриптор файла в регистре EBX. После вызова ядра происходит удаление
дескриптора файла, а в случае ошибки, системный вызов возвращает код ошибки в регистр
EAX.

зует следующие аргументы: исходная позиция для смещения EDX, значение смещения в
байтах в ECX, файловый дескриптор в EBX и номер системного вызова sys_lseek (19) в EAX.
Значение смещения можно задавать в байтах. Значения обозначающие исходную позиции
могут быть следующими:
• (0) – SEEK_SET (начало файла);
• (1) – SEEK_CUR (текущая позиция);
• (2) – SEEK_END (конец файла).

Удаление файла осуществляется системным вызовом sys_unlink, который использует
один аргумент – имя файла в регистре EBX.

# Выполнение лабораторной работы

1. Создаю каталог для программ лабораторной работы № 10, перехожу в него и создаю файлы 
lab10-1.asm, readme-1.txt и readme-2.txt:
![Создаю каталог](1.jpg){#fig:001 width=70%}

2. Ввожу в файл lab10-1.asm текст программы из листинга 10.1 (Программа записи в файл 
сообщения):
![Текст файла](2.jpg){#fig:002 width=70%}
Создаю исполняемый файл и проверьте его работу:
![Работа файла](3.jpg){#fig:003 width=70%}

3. С помощью команды chmod изменяю права доступа к исполняемому файлу lab10-1, запретив 
его выполнение. Пытаюсь выполнить файл:
![Файл не работает](4.jpg){#fig:004 width=70%}
Дефис означает отмену прав доступа к файлу, x – исполнение файла. Получается я не разрешил 
исполнение файла.

4. С помощью команды chmod меняю права доступа к файлу lab10-1.asm с исходным текстом 
программы, добавив права на исполнение. Пытаюсь выполнить его:
![Работа файла](5.jpg){#fig:005 width=70%}
Плюс означает добавление прав доступа к файлу, x – исполнение файла. Получается я разрешил 
исполнение файла.

5. В соответствии с вариантом 10 в таблице 10.4 предоставляю права доступа к файлу 
readme1.txt представленные в символьном виде, а для файла readme-2.txt – в двочном виде. 
Проверяю правильность выполнения с помощью команды ls –l:
![Предоставляю права доступа](6.jpg){#fig:006 width=70%}

# Домашняя работа

Пишу программу, работающую по следующему алгоритму: вывод приглашения “Как Вас, зовут?”, 
ввести с клавиатуры свои фамилию и имя, создать файл с именем name.txt, записать в файл 
сообщение “Меня зовут”, дописать в файл строку, введенную с клавиатуры, закрыть файл:
![Работа файла](7.jpg){#fig:007 width=70%}

# Выводы

Я приобрел навыки написания программ для работы с файлами.

# Список литературы{.unnumbered}

::: {#refs}
:::
